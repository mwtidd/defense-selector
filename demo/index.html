<!doctype html>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=no">
    <title>defense-selector demo</title>
    <script src="../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <script>

      var firstLayerImages = [
        {"c":"b", "p":1, "x":1371,"y":1178},
        {"c":"b", "p":2, "x":1195,"y":1178},
        {"c":"b", "p":3, "x":1018,"y":1178},
        {"c":"b", "p":4, "x":840,"y":1177},
        {"c":"b", p:4, "x":663,"y":1177},
        {"c":"r", "p":1, "x":550,"y":699},
        {"c":"r", "p":2, "x":710,"y":699},
        {"c":"r", "p":3, "x":870,"y":699},
        {"c":"r", "p":4, "x":1029,"y":699},
        {"c":"r", p:4, "x":1185,"y":699}
        ];

      var secondLayerImages = [
        {"c":"r","p":3,"n":"d1","x":879,"y":768},
        {"c":"r","p":3,"n":"d2","x":876,"y":772},
        {"c":"r","p":1,"n":"e1","x":553,"y":759},
        {"c":"r","p":2,"n":"a1","x":717,"y":744},
        {"c":"r","p":2,"n":"a2","x":706,"y":594},
        {"c":"r","p":2,"n":"b1","x":718,"y":757},
        {"c":"r","p":2,"n":"b2","x":715,"y":761},
        {"c":"r","p":2,"n":"c1","x":711,"y":591},
        {"c":"r","p":2,"n":"c2","x":711,"y":715},
        {"c":"r","p":2,"n":"d1","x":720,"y":768},
        {"c":"r","p":2,"n":"d2","x":717,"y":772},
        {"c":"r","p":3,"n":"a1","x":876,"y":744},
        {"c":"r","p":3,"n":"a2","x":871,"y":594},
        {"c":"r","p":3,"n":"b1","x":877,"y":757},
        {"c":"r","p":3,"n":"b2","x":874,"y":761},
        {"c":"r","p":3,"n":"c1","x":876,"y":591},
        {"c":"r","p":3,"n":"c2","x":872,"y":715},
        {"c":"r","p":3,"n":"d1","x":879,"y":768},
        {"c":"r","p":3,"n":"d2","x":876,"y":772},
        {"c":"r","p":4,"n":"a1","x":1034,"y":744},
        {"c":"r","p":4,"n":"a2","x":1032,"y":594},
        {"c":"r","p":4,"n":"b1","x":1036,"y":757},
        {"c":"r","p":4,"n":"b2","x":1033,"y":761},
        {"c":"r","p":4,"n":"c1","x":1036,"y":591},
        {"c":"r","p":4,"n":"c2","x":1032,"y":715},
        {"c":"r","p":4,"n":"d1","x":1037,"y":768},
        {"c":"r","p":4,"n":"d2","x":1034,"y":772},
        {"c":"r","p":5,"n":"a1","x":1192,"y":744},
        {"c":"r","p":5,"n":"a2","x":1189,"y":594},
        {"c":"r","p":5,"n":"b1","x":1193,"y":757},
        {"c":"r","p":5,"n":"b2","x":1190,"y":761},
        {"c":"r","p":5,"n":"c1","x":1192,"y":591},
        {"c":"r","p":5,"n":"c2","x":1189,"y":715},
        {"c":"r","p":5,"n":"d1","x":1195,"y":768},
        {"c":"r","p":5,"n":"d2","x":1191,"y":772},
        {"c":"b","p":1,"n":"e1","x":1391,"y":1220},
        {"c":"b","p":2,"n":"a1","x":1212,"y":1227},
        {"c":"b","p":2,"n":"a2","x":1216,"y":1080},
        {"c":"b","p":2,"n":"b1","x":1216,"y":1241},
        {"c":"b","p":2,"n":"b2","x":1213,"y":1245},
        {"c":"b","p":2,"n":"c1","x":1215,"y":1080},
        {"c":"b","p":2,"n":"c2","x":1214,"y":1194},
        {"c":"b","p":2,"n":"d1","x":1216,"y":1254},
        {"c":"b","p":2,"n":"d2","x":1212,"y":1260},
        {"c":"b","p":3,"n":"a1","x":1035,"y":1227},
        {"c":"b","p":3,"n":"a2","x":1037,"y":1080},
        {"c":"b","p":3,"n":"b1","x":1040,"y":1241},
        {"c":"b","p":3,"n":"b2","x":1036,"y":1245},
        {"c":"b","p":3,"n":"c1","x":1039,"y":1080},
        {"c":"b","p":3,"n":"c2","x":1037,"y":1194},
        {"c":"b","p":3,"n":"d1","x":1038,"y":1254},
        {"c":"b","p":3,"n":"d2","x":1035,"y":1260},
        {"c":"b","p":4,"n":"a1","x":857,"y":1227},
        {"c":"b","p":4,"n":"a2","x":855,"y":1080},
        {"c":"b","p":4,"n":"b1","x":862,"y":1241},
        {"c":"b","p":4,"n":"b2","x":858,"y":1245},
        {"c":"b","p":4,"n":"c1","x":858,"y":1080},
        {"c":"b","p":4,"n":"c2","x":857,"y":1194},
        {"c":"b","p":4,"n":"d1","x":861,"y":1254},
        {"c":"b","p":4,"n":"d2","x":857,"y":1260},
        {"c":"b","p":5,"n":"a1","x":680,"y":1227},
        {"c":"b","p":5,"n":"a2","x":671,"y":1080},
        {"c":"b","p":5,"n":"b1","x":684,"y":1241},
        {"c":"b","p":5,"n":"b2","x":680,"y":1245},
        {"c":"b","p":5,"n":"c1","x":673,"y":1080},
        {"c":"b","p":5,"n":"c2","x":677,"y":1194},
        {"c":"b","p":5,"n":"d1","x":684,"y":1254},
        {"c":"b","p":5,"n":"d2","x":680,"y":1260}];

      function cloneArray (existingArray) {
        var newObj = (existingArray instanceof Array) ? [] : {};
        for (i in existingArray) {
          if (i == 'clone') continue;
          if (existingArray[i] && typeof existingArray[i] == "object") {
            newObj[i] = cloneArray(existingArray[i]);
          } else {
            newObj[i] = existingArray[i]
          }
        }
        return newObj;
      }

      var baseOptions = [
        {'sku': 'a', 'name':'Category A','items':[{'name':'portcullis','sku':'a2'},{'name':'cheval','sku':'a1'}]},
        {'sku':'b', 'name':'Category B','items':[{'name':'moat','sku':'b2'},{'name':'ramparts','sku':'b1'}]},
        {'sku':'c', 'name':'Category C','items':[{'name':'drawbridge','sku':'c1'},{'name':'sallyport','sku':'c2'}]},
        {'sku':'d','name':'Category D','items':[{'name':'terrain','sku':'d1'},{'name':'wall','sku':'d2'}]}];
      var models = [
        //{'sku':'p1', 'name':'Position 1', 'options': [{'sku':'static','name':'Low Bar','items':[{'name':'bar'}]}]},
        {'id': 'r2', 'color': 'r', 'sku':'p2', 'name':'Position 2', 'options':cloneArray(baseOptions)},
        //{'sku':'p3', 'name':'Position 3', 'options':baseOptions},
        {'id': 'r4', 'color': 'r', 'sku':'p4', 'name':'Position 4', 'options':cloneArray(baseOptions)},
        {'id': 'r5', 'color': 'r', 'sku':'p5', 'name':'Position 5', 'options':cloneArray(baseOptions)},
        {'id': 'b2', 'color': 'b', 'sku':'p2', 'name':'Position 2', 'options':cloneArray(baseOptions)},
        //{'sku':'p3', 'name':'Position 3', 'options':baseOptions},
        {'id': 'b4', 'color': 'b', 'sku':'p4', 'name':'Position 4', 'options':cloneArray(baseOptions)},
        {'id': 'b5', 'color': 'b', 'sku':'p5', 'name':'Position 5', 'options':cloneArray(baseOptions)}];

      var rules = [{'modelSku': 'p1', static: true}, {'modelSku': 'p3', restricted: true},{'optionSku':'a','maxValueCount':'1'},{'optionSku':'b','maxValueCount':'1'},{'optionSku':'c','maxValueCount':'1'},{'optionSku':'d','maxValueCount':'1'},{'optionSku':'b','disabled':true}];

      (function(){
        window.addEventListener('WebComponentsReady', function() {
          Polymer.dom(document.getElementById("config")).node.set("models", models);
          Polymer.dom(document.getElementById("config")).node.set("rules", rules);

          Polymer.dom(document.getElementById("config")).node.set("firstLayerImages", firstLayerImages);
          Polymer.dom(document.getElementById("config")).node.set("secondLayerImages", secondLayerImages);
          Polymer.dom(document.getElementById("config")).node.set("backgroundImage", "layers/A0.png");
          Polymer.dom(document.getElementById("config")).node.initPrecache();
        });
      })();
    </script>
    <link rel="import" href="../defense-selector.html">
    <link rel="import" href="../defense-canvas.html">
  </head>
  <body>

    <!-- https://1storage.googleapis.com/defenseselector -->

    <defense-selector id="config" vignette-url="demo/field.png" image-url="http://10.241.251.53:8080/envisa-config"></defense-selector>




    <!--
    <defense-canvas id="scene" image-url="storage.googleapis.com/defenseselector"></defense-canvas>
    -->
    <script>

    </script>

    <style is="custom-style">
      html,body{
        position: relative;
        height: 100%;
        width: 100%;
        margin: 0;
      }

      body{
        @apply(--layout-vertical);
      }

      defense-canvas{
        height: 100%;
        width: 100%;
      }

      #vignette{
        position: relative;
        width: 1920px;
        height: 1080px;
      }

    </style>

  </body>
</html>
